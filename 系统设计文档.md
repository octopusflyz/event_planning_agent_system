# 大信科多Agent自主推理系统设计文档

## 1. 系统架构设计

本系统采用多Agent协作架构，围绕活动策划任务，设计多个功能明确、职责分明的Agent模块。各Agent通过协调Agent统一管理，形成闭环协作，实现无人工干预的自主推理与执行。

### 架构组成

- **需求解析与推断Agent**  
  负责从有限输入中提取明确需求，结合历史活动数据推断缺失信息，构建完整活动需求方案。

- **活动规划与设计Agent**  
  根据需求自动设计详细活动方案，竞赛类活动设计赛题、规则、评分标准，制定流程与资源安排。

- **风格分析与提取Agent**  
  自动从参考资料中提取品牌视觉元素与文案风格，归纳表达模式，构建风格指南。

- **主视觉设计Agent**  
  结合活动类型与风格指南，选择视觉模板，调用图片生成API，生成符合大信科风格的主视觉设计。

- **文案创作Agent**  
  根据活动特点与风格指南，调用文本处理API，生成多版本宣传文案，确保信息完整且风格统一。


### 数据流与控制流

1. 需求解析Agent接收初始输入，输出完整需求方案。
2. 活动规划Agent基于需求方案生成详细活动计划。
3. 风格分析Agent提取视觉与文案风格指南。
4. 主视觉设计Agent根据风格指南和活动类型生成视觉设计。
5. 文案创作Agent根据风格指南和活动计划生成宣传文案。
6. 协调Agent监控各环节，进行质量控制和反馈调整。

---

## 2. Agent角色设计与自主决策机制

### 需求解析与推断Agent

- **输入**：有限的活动信息。
- **输出**：完整、合理的活动需求方案。
- **决策机制**：基于历史数据和规则推断缺失信息，自动补全需求字段。

### 活动规划与设计Agent

- **输入**：完整需求方案。
- **输出**：详细活动方案、竞赛规则、评分标准、时间安排。
- **决策机制**：根据活动类型调用规则逻辑生成API，同时调用外部API的模型，自动设计赛题和流程。

### 风格分析与提取Agent

- **输入**：参考文档、历史资料。
- **输出**：视觉元素集合、文案风格指南。
- **决策机制**：文本和图像分析，归纳总结风格特征，同时调用外部API的模型，形成结构化风格指南。

### 主视觉设计Agent

- **输入**：活动类型、风格指南。
- **输出**：符合风格的主视觉设计图（PNG/SVG）。
- **决策机制**：自动选择模板，调用图片生成API，后处理叠加必要元素。

### 文案创作Agent

- **输入**：活动计划、风格指南。
- **输出**：多版本宣传文案。
- **决策机制**：调用文本处理API，结合风格参考，自动润色和风格调整。


---

## 3. API调用策略与参数设计

### 图片生成API

- **调用方式**：主视觉设计Agent调用`ImageGenerationClient`。
- **参数设计**：
  - `prompt`：基于风格指南和活动信息构造的详细提示词。
  - `elements`：必要元素图片二进制数据列表。
  - `model`：指定生成模型（如`flux-dev`）。
  - `size`：生成图片尺寸（如`1024x1024`）。
- **后处理**：生成图片后，叠加logo和其他必要元素，保证风格一致。

### 文本处理API

- **调用方式**：文案创作Agent调用`TextProcessingClient`。
- **参数设计**：
  - `base_content`：基础文案内容。
  - `style`：文案语言风格（正式、亲切等）。
  - `style_reference`：风格参考文本（JSON结构化文本，包含txt和Word文档内容）。
  - `prompt`：针对不同文案版本的具体写作提示。
  - `model`：指定生成模型（如`deepseek-chat`）。
- **功能**：润色、风格调整、内容丰富。

### 规则逻辑生成API

- **调用方式**：活动规划Agent调用（具体实现视项目扩展）。
- **功能**：自动设计竞赛规则、评分标准，平衡难度与可行性。

---

## 4. 风格分析方法论

### 视觉风格提取

- 利用风格分析Agent从历史活动视觉资料中提取关键元素（如博雅塔、狮子、配色方案）。
- 结构化存储视觉元素，供主视觉设计Agent调用。
- 设计提示词时强调必要元素的包含和风格统一。

### 文案风格归纳

- 解析参考文档（txt和Word格式），转换为JSON结构化文本。
- 归纳语言风格、表达模式、用词习惯。
- 作为文本处理API的风格参考输入，指导文案生成。


---

## 总结

本系统通过多Agent协作与自主决策，结合多种API接口，实现了从需求解析到活动策划、视觉设计、文案创作的全流程自动化。风格分析与统一风格指南保障了输出的专业性和品牌一致性。

## 致谢

本系统代码完成很大程度依赖Blackbox、GPT-4、deepseek-chat。
感谢所有伟大的AI！
